# GitHub Actions å·¥ä½œæµ - é¢„è§ˆéƒ¨ç½²é€šçŸ¥
# å½“ PR åˆ›å»ºæ—¶,è‡ªåŠ¨åœ¨è¯„è®ºä¸­æ·»åŠ  Cloudflare Pages é¢„è§ˆé“¾æ¥

name: Preview Deployment Comment

on:
  pull_request:
    types: [opened, synchronize]

jobs:
  comment:
    runs-on: ubuntu-latest
    steps:
      - name: Comment PR
        uses: actions/github-script@v7
        with:
          script: |
            const prNumber = context.payload.pull_request.number;
            const commitHash = context.payload.pull_request.head.sha.substring(0, 8);
            const previewUrl = `https://${commitHash}.guess-the-entry-web.pages.dev`;
            
            const comment = `## ğŸš€ é¢„è§ˆéƒ¨ç½²
            
            ä½ çš„æ›´æ”¹å·²è‡ªåŠ¨éƒ¨ç½²åˆ° Cloudflare Pages!
            
            **é¢„è§ˆé“¾æ¥**: ${previewUrl}
            
            > æ³¨æ„: é¢„è§ˆéƒ¨ç½²å¯èƒ½éœ€è¦ 2-3 åˆ†é’Ÿæ‰èƒ½å®Œæˆã€‚
            
            ---
            
            ğŸ“ **æäº¤**: \`${commitHash}\`
            ğŸŒ¿ **åˆ†æ”¯**: \`${context.payload.pull_request.head.ref}\`
            `;
            
            github.rest.issues.createComment({
              issue_number: prNumber,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: comment
            });
