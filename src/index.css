/* 导入动画样式 */
@import './styles/animations.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

/* 自定义基础样式 */
@layer base {
  :root {
    /* 中性色主题变量 */
    --color-bg-app: #ffffff;
    --color-surface: #ffffff;
    --color-border: #e5e7eb; /* gray-200 */
    --color-text: #111827;   /* gray-900 */
    --color-text-muted: #6b7280; /* gray-500 */

    /* 按钮与强调色 */
    --color-btn-bg: #f3f4f6;       /* gray-100 */
    --color-btn-fg: #111827;       /* gray-900 */
    --color-btn-bg-hover: #e5e7eb; /* gray-200 */
    --color-btn-border: #e5e7eb;   /* gray-200 */
    --color-primary: #4772c3;
    --color-primary-hover: #3d62a9; /* 深10% */
    --color-primary-active: #34528f; /* 深20% */
    --color-success: #4CAF50;
    --color-accent: #4772c3;       /* 统一强调色为主题色 */
    /* 边框高亮（末项高亮/成功/危险） */
    --color-border-success-accent: #065f46; /* green-500：成功高亮边框 */
    --color-border-danger-accent: #dc2626;  /* red-300/400：危险高亮边框 */

    /* 间距与圆角 */
    --section-padding: 1rem;       /* 移动端基准 */
    --section-padding-lg: 1.25rem; /* 桌面端基准 */
    --radius: 0.75rem;
    --transition: 0.3s ease;
  }
  html {
    scroll-behavior: smooth;
    transition: background-color 200ms ease, color 200ms ease;
  }
  
  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
      sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    transition: background-color 200ms ease, color 200ms ease;
  }
  /* 暗色主题变量（通过 html.dark 类控制，优先于系统偏好） */
  html.dark {
    color-scheme: dark;
    --color-bg-app: #0f172a;       /* slate-900 */
    --color-surface: #111827;      /* gray-900 */
    --color-border: #334155;       /* slate-700 */
    --color-text: #cbd5e1;         /* slate-300 */
    --color-text-muted: #94a3b8;   /* slate-400 */
    --color-btn-bg: #1f2937;       /* gray-800 */
    --color-btn-fg: #cbd5e1;       /* slate-300 */
    --color-btn-bg-hover: #374151; /* gray-700 */
    --color-btn-border: #334155;   /* slate-700 */
    --color-accent: #64748b;       /* slate-500 */
    /* 边框高亮（暗色模式） */
    --color-border-success-accent: #34d399; /* green-400/500：成功高亮边框 */
    --color-border-danger-accent: #ef4444;  /* red-500：危险高亮边框 */
  }
}

/* 自定义组件样式 */
@layer components {
  /* 扁平化卡片容器 */
  .card-flat {
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--radius);
    box-shadow: none;
    transition: all var(--transition);
  }

  /* 统一区域内边距与对齐 */
  .section {
    padding: var(--section-padding);
  }
  @media (min-width: 1024px) {
    .section {
      padding: var(--section-padding-lg);
    }
  }

  /* 统一标题样式（保留图标与功能标识） */
  .section-title {
    color: var(--color-text);
    font-weight: 600;
  }
  .section-subtitle {
    color: var(--color-text-muted);
    font-weight: 500;
  }

  /* 扁平化按钮样式 */
  .btn-flat {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.375rem;
    padding: 0.625rem;
    background: transparent;
    color: var(--color-btn-fg);
    border: none;
    border-radius: 0.5rem;
    transition: all var(--transition);
  }
  .btn-flat:hover {
    background: var(--color-btn-bg-hover);
  }
  .btn-flat:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  /* 主题色实体按钮 */
  .btn-primary {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.375rem;
    padding: 0.625rem 1rem;
    background: var(--color-primary);
    color: #ffffff;
    border: none;
    border-radius: 0.5rem;
    transition: all var(--transition);
  }
  .btn-primary:hover { background: var(--color-primary-hover); }
  .btn-primary:active { background: var(--color-primary-active); }
  .btn-primary:disabled {
    background: #cccccc;
    color: #ffffff;
    cursor: not-allowed;
    opacity: 1;
  }

  /* 游戏卡片样式（使用主题变量）*/
  .game-card {
    border: 1px solid var(--color-border);
    border-radius: 0.75rem;
    background: var(--color-surface);
    box-shadow: 0 1px 2px rgba(0,0,0,0.06);
    transition: all var(--transition);
  }
  
  
  /* 次要按钮样式 */
  .btn-secondary {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.375rem;
    padding: 0.5rem 1rem;
    background: var(--color-btn-bg);
    color: var(--color-btn-fg);
    border: 1px solid var(--color-btn-border);
    border-radius: 0.5rem;
    transition: all var(--transition);
  }
  .btn-secondary:hover { background: var(--color-btn-bg-hover); }
  .btn-secondary:focus { outline: none; box-shadow: 0 0 0 2px var(--color-primary); }
  
  /* 成功按钮样式 */
  .btn-success {
    @apply bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2;
  }
  
  /* 危险按钮样式 */
  .btn-danger {
    @apply bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2;
  }
  
  /* 输入框样式 */
  .form-input {
    width: 100%;
    padding: 0.75rem 1rem;
    border: 1px solid var(--color-border);
    border-radius: 0.5rem;
    outline: none;
    background: var(--color-surface);
    color: var(--color-text);
    transition: all var(--transition);
  }
  .form-input:focus {
    border-color: var(--color-primary);
    box-shadow: 0 0 3px rgba(71,114,195,0.3);
  }
  
  /* 文本区域样式 */
  .form-textarea {
    width: 100%;
    padding: 0.75rem 1rem;
    border: 1px solid var(--color-border);
    border-radius: 0.5rem;
    outline: none;
    background: var(--color-surface);
    color: var(--color-text);
    transition: all var(--transition);
    resize: none;
  }
  .form-textarea:focus {
    border-color: var(--color-primary);
    box-shadow: 0 0 3px rgba(71,114,195,0.3);
  }
  
  /* 标签样式 */
  .badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
  }
  
  .badge-primary {
    background: rgba(71, 114, 195, 0.15);
    color: var(--color-primary);
  }
  
  .badge-success {
    @apply bg-green-100 text-green-800;
  }
  
  .badge-warning {
    @apply bg-yellow-100 text-yellow-800;
  }
  
  .badge-error {
    @apply bg-red-100 text-red-800;
  }
  
  /* 进度条样式 */
  .progress-bar {
    @apply h-2 bg-gray-200 rounded-full overflow-hidden;
  }
  
  .progress-fill {
    @apply h-full transition-all duration-300 ease-out;
    background: var(--color-primary);
  }
  
  /* 卡片标题样式 */
  .card-title {
    font-size: 1.25rem; /* text-xl */
    font-weight: 600;
    color: var(--color-text);
    margin-bottom: 1rem;
  }
  
  /* 卡片内容样式 */
  .card-content {
    color: var(--color-text-muted);
    line-height: 1.75;
  }
}

/* 移动端输入框紧凑化 */
@media (max-width: 640px) {
  .form-input {
    padding: 0.3rem 0.6rem; /* 缩小上下与左右内边距，降低高度 */
    font-size: 1rem;
  }
  /* 移动端：紧凑按钮，使其与输入框高度一致 */
  .btn-compact-mobile {
    padding: 0.3rem 0.6rem; /* 与 .form-input 保持一致的内边距 */
    font-size: 1rem;        /* 与输入框一致的字体大小 */
    line-height: 1.5;       /* 统一行高，减少高度差异 */
    border-radius: 0.5rem;  /* 与输入框一致的圆角 */
  }
}

/* 自定义工具类 */
@layer utilities {
  /* 文本选择样式 */
  .select-none {
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
  }
  
  /* 自定义滚动条 */
  .custom-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: #9ca3af #f3f4f6;
  }
  
  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
  }
  
  .custom-scrollbar::-webkit-scrollbar-track {
    background: #f3f4f6;
    border-radius: 3px;
  }
  
  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: #9ca3af;
    border-radius: 3px;
  }
  
  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: #6b7280;
  }
  
  /* 渐变背景 */
  .gradient-bg {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  }
  
  .gradient-bg-light {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
  }
  
  .gradient-bg-dark {
    background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
  }
  
  /* 玻璃态效果 */
  .glass {
    backdrop-filter: blur(10px);
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
  }
  
  /* 悬停效果 */
  .hover-lift {
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }
  
  .hover-lift:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
  }
  
  /* 加载动画 */
  .loading-dots {
    display: inline-block;
  }
  
  .loading-dots::after {
    content: '';
    animation: loadingDots 1.5s infinite;
  }
  
  @keyframes loadingDots {
    0%, 20% { content: '.'; }
    40% { content: '..'; }
    60%, 100% { content: '...'; }
  }
  
  /* 脉冲动画 */
  .pulse-slow {
    animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }
  
  /* 旋转动画 */
.spin-slow {
    animation: spin 3s linear infinite;
  }
}

/* 暗色模式组件覆盖（通过 html.dark 激活） */
/* 暗色模式下通过 html.dark 根变量覆盖，无需组件级别 @apply 覆盖 */

/* 打印样式 */
@media print {
  .no-print {
    display: none !important;
  }
  
  .print-break {
    page-break-before: always;
  }
}
  /* 类别选择卡片（基础样式，颜色由类或变量控制） */
  .category-card {
    position: relative;
    border: none;
    border-radius: 0.5rem;
    padding: 0.75rem 1rem;
    text-align: center;
    background: var(--color-surface);
    transition: all var(--transition);
  }
  .category-card:hover { background: var(--color-btn-bg-hover); }
  /* 选中态：增加主题色内边框以增强暗色下的可见性 */
  .category-card.selected {
    background: var(--color-btn-bg-hover);
    /* box-shadow: inset 0 0 0 2px var(--color-primary); */
  }